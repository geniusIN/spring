<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yedam.app.security.mapper.UserMapper">
	<resultMap id="userInfo" type="UserVO">
		<id property="loginId" column="login_id"></id> <!-- property 는 필드고 column 은 컬럼 -->
		<result property="password" column="password"/> 
		<collection property="roleList" ofType="String"> <!-- 일대다 일때 컬렉션 사용 -->
			<result column="role_name"/> <!-- select 해서 가지고 오는값 => role_name 이 여러개 와서 한거번에 담겠다는 뜻 -->
		</collection>
	</resultMap>
	<select id="getUserInfo" parameterType="String" resultMap="userInfo">
		SELECT login_id
         		, password
				, role_name
		FROM t_user 
				JOIN t_user_role
	            ON t_user.id = t_user_role.user_id
	            JOIN t_role
	            ON t_user_role.role_id = t_role.id 
		WHERE login_id = #{username}
	</select>

</mapper>